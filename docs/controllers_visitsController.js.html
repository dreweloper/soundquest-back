<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/visitsController.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controllers/visitsController.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Visit = require('../models/visitModel');

/**
 * Adds a new visit record to the database and sends a JSON response to the client.
 * 
 * @async
 * @function addVisit
 * @param {Object} req - The request object containing information about the incoming HTTP request.
 * @param {Object} res - The response object used to send back an HTTP response to the client.
 */
const addVisit = async (req, res) => {

    /**
     * The complete location (the public IP address) of the client (device) thatâ€™s making the request.
     * @type {Object}
     */
    const location = req.body;

    const newVisit = new Visit({ location }); // Assign the location object to the location property.


    try {
        
        /**
         * The database operation response object.
         * @type {Promise&lt;Object>}
         */
        const response = await newVisit.save();

        if(response) {

            res.status(201).json({
                ok: true,
                data: response
            });

        } else {

            res.status(400).json({
                ok: false,
                msg: 'Bad request. The provided data is invalid or incomplete.'
            });

        };

    } catch (error) {
        
        console.log(error);

        /**
         * Handles and logs errors that occur during the function's execution.
         * @type {Object}
         * @property {Boolean} ok - Indicates if the request was successful (false).
         * @property {String} msg - A generic error message instructing the client to contact the administrator.
         * @property {Object} error - The error object caught during the catch block.
         */
        res.status(500).json({
            ok: false,
            msg: 'Internal server error. Something went wrong while processing your request.',
            error
        });
    };

}; //!ADDVISIT


module.exports = { addVisit };</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addTrack">addTrack</a></li><li><a href="global.html#addVisit">addVisit</a></li><li><a href="global.html#connection">connection</a></li><li><a href="global.html#deleteTrack">deleteTrack</a></li><li><a href="global.html#getTrackById">getTrackById</a></li><li><a href="global.html#getTracks">getTracks</a></li><li><a href="global.html#getTracksCount">getTracksCount</a></li><li><a href="global.html#trackSchema">trackSchema</a></li><li><a href="global.html#visitSchema">visitSchema</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Sep 03 2023 14:44:00 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
